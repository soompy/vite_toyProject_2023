<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./src/assets/favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Spartan:wght@700&display=swap" rel="stylesheet">
  <title>춘식러버 페이지</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
</head>

<body>
  <load="/header.html" />

  <div class="choonsik-lover-wrapper">
    <!-- matter.js -->
    <section class="visual vi-service dark recruit">
      <!-- <div class="inner vi-obj" id="recruit-main-banner">
        <div class="vi-title-wrap">
          <div class="vi-title-box">
            <h3>
              테스트
            </h3>
          </div>
        </div>
      </div> -->
    </section>

    <section class="objects-contents">
      <div class="marquee_wrap">
        <div class="marquee_box">
          <span class="marquee_text">lovely choonsik</span>
        </div>
        <div class="marquee_box">
          <span class="marquee_text">lovely choonsik</span>
        </div>
        <div class="marquee_box">
          <span class="marquee_text">lovely choonsik</span>
        </div>
        <div class="marquee_box">
          <span class="marquee_text">lovely choonsik</span>
        </div>
      </div>

      <div class="floating-obj">
        <span class="obj-item"><img
            src="https://item.kakaocdn.net/do/c5c470298d527ef65eb52883f0f186c49f5287469802eca457586a25a096fd31"
            alt="춘식하트"></span>
        <span class="obj-item"><img
            src="https://item.kakaocdn.net/do/c5c470298d527ef65eb52883f0f186c4f604e7b0e6900f9ac53a43965300eb9a"
            alt="춘식꾹꾹"></span>
        <span class="obj-item"><img
            src="https://item.kakaocdn.net/do/c5c470298d527ef65eb52883f0f186c482f3bd8c9735553d03f6f982e10ebe70"
            alt="춘식무지개"></span>
      </div>
    </section>


    <section id="one" class="contentsBox">
      <div class="row no-gutters">
        <div class="col">
          <div class="rectangle"></div>
          <div class="about-choonsik">
            <div class="text-block">
              <h2 class="mb-0">choonsik</h2>
              <h5>happy</h5>
            </div>
            <div class="blocks">
              <div class="faces"></div>
              <div class="faces"></div>
              <div class="faces"></div>
              <div class="faces"></div>
              <div class="faces"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="two" class="contentsBox">
      <div class="row no-gutters">
        <div class="col">
          <div class="room-choonsik">
            <div>
              <img src="https://i.pinimg.com/originals/95/8f/59/958f599f934e94f63d6d60b676707ece.png" class="img-fluid"
                alt="Responsive image" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="three" class="contentsBox">
      <div class="image"></div>
      <div class="row no-gutters">
        <div class="col">
          <div class="elem">
            <h2>GET OUT THERE</h2>
          </div>
        </div>
      </div>
    </section>

    <section id="four" class="section">
      <div class="image"></div>
      <div class="row no-gutters">
        <div class="col">
          <div class="elem">
            <h2>GO RIDE</h2>
          </div>
        </div>
      </div>
    </section>
  </div>

  <load="/footer.html" />


  <script type="module" src="/main.js"></script>
  <script src="./node_modules/animejs/lib/anime.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>

  <script>
    var tl = anime.timeline({
      targets: '.floating-obj .obj-item',
      delay: function (el, i) { return i * 200 },
      duration: 1000,
      easing: 'easeOutExpo',
      direction: 'alternate',
      loop: true
    });

    tl
      .add({
        translateX: 250,
        easing: 'spring',
      })
      .add({
        opacity: .5,
        scale: 2
      })
      .add({
        targets: '.floating-obj .obj-item.triangle',
        rotate: 180
      })
      .add({
        translateX: 0,
        scale: 1
      });
  </script>

  <script>
    // 메인화면 효과

    // Color palette variables
    let brown = '#926634';
    let midBrown = '#a6855c';
    let light = 'rgba(255, 255, 255, 0.4)';

    // Add scrollmagic controller
    let controller = new ScrollMagic.Controller();

    //------------------
    //TIMELINE 1
    //------------------

    // Add timeline
    let tl1 = anime.timeline({ autoplay: false });

    // Add animations
    let s1a1 = {
      targets: '#one .about-choonsik',
      opacity: 1,
      translateX: {
        value: [250, 0],
        duration: 800
      },
      rotate: {
        value: [90, 0],
        duration: 1200,
        easing: 'easeInOutSine'
      },
      scale: {
        value: [2, 1.5],
        duration: 1100,
        delay: 800,
        easing: 'easeInOutQuart'
      },
      color: [midBrown, brown],
      duration: 800,
      delay: 0,
      easing: 'easeInOutSine'
    };

    let s1a2 = {
      targets: '#one .about-choonsik .blocks .faces',
      backgroundColor: [midBrown, brown],
      borderRadius: function (el) { return anime.random(2, 10); },
      delay: function (el) { return anime.random(0, 800); }
    };

    let s1a3 = {
      targets: '#one .rectangle',
      opacity: [0, 1],
      translateX: {
        value: ['-100vw', '0vw'],
        duration: 1500,
      },
      translateY: {
        value: [-100, 0],
        duration: 1500,
      },
      easing: 'easeInOutSine',
      duration: 2000
    };

    // Add children
    tl1.add(s1a3).add(s1a1, '-=1600').add(s1a2, '-=1300');

    // Get section height
    let oneHeight = document.getElementById("one").clientHeight;
    console.log('oneHeight: ' + oneHeight);

    //------------------
    // 첫번째 스크롤 효과
    //------------------

    //Add first scrollmagic scene
    let scene1 = new ScrollMagic.Scene({
      triggerElement: "#one",
      triggerHook: 0.5,
      reverse: false
    })

      // Add debug indicators
      .addIndicators({
        colorTrigger: "black",
        colorStart: "blue",
        colorEnd: "red",
        indent: 10
      })

      // Trigger animation timeline
      .on("enter", function (event) {
        tl1.play();
      })

      .addTo(controller);



    //------------------
    // 두번째 스크롤 효과
    //------------------

    let tl2 = anime.timeline({ autoplay: false });

    // Add animations
    let s2a1 = {
      targets: '#two .room-choonsik img',
      opacity: [0.3, 1],
      scale: [4, 1],
      duration: 1000,
      delay: 0,
      easing: 'easeInOutSine'
    };

    let s2a2 = {
      targets: '#two .room-choonsik img',
      scale: 1,
      duration: 2000,
    };

    // Add children
    tl2.add(s2a1).add(s2a2);

    // Get section height
    let twoHeight = document.getElementById("two").clientHeight;
    console.log('twoHeight: ' + twoHeight);

    //------------------
    //SCENE 2
    //------------------

    //Add second scrollmagic scene
    let scene2 = new ScrollMagic.Scene({
      triggerElement: "#two",
      duration: 4500,
      triggerHook: 0,
    })

      // Add debug indicators
      .addIndicators({
        colorTrigger: "black",
        colorStart: "blue",
        colorEnd: "red",
        indent: 10
      })

      // Trigger animation timeline
      //Use scroll position to play animation
      .on("progress", function (event) {
        tl2.seek(tl2.duration * event.progress);
      })

      .setPin('#two')
      .addTo(controller);



    //------------------
    // 세번째 스크롤 효과
    //------------------

    let tl3 = anime.timeline({ autoplay: false });

    // Add animations
    let s3a1 = {
      targets: '#three h2',
      opacity: 1,
      scale: [4, 1.5],
      duration: 1000,
      delay: 0,
      easing: 'easeInOutSine'
    };

    // Add children
    tl3.add(s3a1);

    //------------------
    //TIMELINE 4
    //------------------

    // Add timeline
    let tl4 = anime.timeline({ autoplay: false });

    // Add animations
    let s3a2 = {
      targets: '#three .image',
      opacity: [0, .5],
      translateX: {
        value: ['-100%', '0%'],
        duration: 1500,
      },
      duration: 1000,
      delay: 0,
      easing: 'easeInOutSine'
    };

    // Add children
    tl4.add(s3a2);

    //------------------
    //SCENE 3
    //------------------

    //Add third scrollmagic scene
    let scene3 = new ScrollMagic.Scene({
      triggerElement: "#three",
      duration: 2000,
      triggerHook: 0
    })

      // Add debug indicators
      .addIndicators({
        colorTrigger: "black",
        colorStart: "blue",
        colorEnd: "red",
        indent: 10
      })

      // Trigger animation timeline
      //Use scroll position to play animation
      .on("enter", function (event) {
        tl3.play();
      })
      .on("progress", function (event) {
        tl4.seek((tl4.duration * event.progress) * 3);
      })

      .setPin('#three')
      .addTo(controller);

    //------------------
    // 네번째 스크롤 효과
    //------------------

    // Add timeline
    let tl5 = anime.timeline({ autoplay: false });

    // Add animations
    let s4a1 = {
      targets: '#four h2',
      opacity: 1,
      scale: [1.5, 3],
      duration: 1000,
      delay: 0,
      easing: 'easeInOutSine'
    };

    // Add children
    tl5.add(s4a1);

    //------------------
    //TIMELINE 6
    //------------------

    // Add timeline
    let tl6 = anime.timeline({ autoplay: false });

    // Add animations
    let s4a2 = {
      targets: '#four .image',
      opacity: [0, .5],
      translateX: {
        value: ['100%', '0%'],
        duration: 1500,
      },
      duration: 1000,
      delay: 0,
      easing: 'easeInOutSine'
    };

    // Add children
    tl6.add(s4a2);

    //------------------
    //SCENE 4
    //------------------

    //Add third scrollmagic scene
    let scene4 = new ScrollMagic.Scene({
      triggerElement: "#four",
      duration: 2000,
      triggerHook: 0
    })

      // Add debug indicators
      .addIndicators({
        colorTrigger: "black",
        colorStart: "blue",
        colorEnd: "red",
        indent: 10
      })

      // Trigger animation timeline
      //Use scroll position to play animation
      .on("enter", function (event) {
        tl5.play();
      })
      .on("progress", function (event) {
        tl6.seek((tl6.duration * event.progress) * 3);
      })

      .setPin('#four')
      .addTo(controller);
  </script>

  <script>
    // matter visual
    const targetElem = document.querySelector("#recruit-main-banner");
    const parentElem = document.querySelector("div.visual.vi-service");
    const headerElem = document.querySelector("header");

    // module aliases
    let Engine = Matter.Engine,
      Render = Matter.Render,
      Runner = Matter.Runner,
      Bodies = Matter.Bodies,
      Composite = Matter.Composite;

    // create an engine
    let engine = Engine.create();

    // create a renderer
    const mobileWidthForRecruit = 760;
    const isMobileForRecruit = window.innerWidth < mobileWidthForRecruit;
    const w = targetElem.offsetWidth;
    const h = isMobileForRecruit ? parentElem.offsetHeight - 20 : parentElem.offsetHeight + headerElem.offsetHeight

    let render = Render.create({
      element: targetElem,
      engine: engine,
      options: {
        width: w,
        height: h,
        showAngleIndicator: false,
        wireframes: false,
        // wireframes: true,
        background: 'transparent',
      },
    });

    function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min)) + min;
    }

    let defaultRectImageInfo = {
      type: "rectangle",
      path: "src/assets/images/sweetPotato0.png",
      w: 1657,
      h: 604,
      xScale: 0.3,
      yScale: 0.3,
      charmferRadius: 10,
    };

    let defaultCircleImageInfo = {
      type: "circle",
      path: "src/assets/images/sweetPotato0.png",
      w: 578,
      h: 578,
      xScale: 0.3,
      yScale: 0.3,
    };

    let defaultMobileRectImageInfo = {
      ...defaultRectImageInfo,
      xScale: 1,
      yScale: 1,
    };

    let defaultMobileCircleImageInfo = {
      ...defaultCircleImageInfo,
      xScale: 1,
      yScale: 1,
    };

    const minDesktopWidth = 1200;
    const minMobileWidth = 500;
    let decreaseRate = 1;
    if (window.innerWidth < minDesktopWidth) {
      decreaseRate = window.innerWidth / minDesktopWidth;
    }
    defaultRectImageInfo["xScale"] = defaultRectImageInfo["xScale"] * decreaseRate;
    defaultRectImageInfo["yScale"] = defaultRectImageInfo["yScale"] * decreaseRate;
    defaultCircleImageInfo["xScale"] = defaultCircleImageInfo["xScale"] * decreaseRate;
    defaultCircleImageInfo["yScale"] = defaultCircleImageInfo["yScale"] * decreaseRate;

    // if Mobile, not use resizing the scale of objects
    /*
    if (isMobileForRecruit) {
        if (window.innerWidth < minMobileWidth) {
            decreaseRate = minMobileWidth / mobileWidthForRecruit;
        } else if (window.innerWidth < mobileWidthForRecruit) {
            decreaseRate = window.innerWidth / mobileWidthForRecruit;
        }
        defaultMobileRectImageInfo["xScale"] = defaultMobileRectImageInfo["xScale"] * decreaseRate;
        defaultMobileRectImageInfo["yScale"] = defaultMobileRectImageInfo["yScale"] * decreaseRate;
        defaultMobileCircleImageInfo["xScale"] = defaultMobileCircleImageInfo["xScale"] * decreaseRate;
        defaultMobileCircleImageInfo["yScale"] = defaultMobileCircleImageInfo["yScale"] * decreaseRate;
    } 
    */

    let imageInfos = [
      {
        ...defaultRectImageInfo,
        path: "src/assets/images/sweetPotato0.png",
        w: 1684,
        h: 604,
      },
      {
        ...defaultRectImageInfo,
        path: "src/assets/images/sweetPotato0.png",
        w: 1833,
        h: 604,
      },
      {
        ...defaultRectImageInfo,
        path: "src/assets/images/sweetPotato0.png",
        w: 1533,
        h: 604,
      },
      {
        ...defaultRectImageInfo,
        path: "src/assets/images/sweetPotato0.png",
        w: 1722,
        h: 604,
      },
      {
        ...defaultRectImageInfo,
        path: "src/assets/images/sweetPotato0.png",
        w: 1657,
        h: 604,
      },
      {
        ...defaultCircleImageInfo,
        path: "src/assets/images/sweetPotato0.png",
        w: 1824,
        h: 1823,
      },
      // {
      //     ...defaultCircleImageInfo,
      //     path: "/images/recruit/obj_duck.png",
      //     w: 578,
      //     h: 578,
      // },
      // {
      //     ...defaultCircleImageInfo,
      //     path: "/images/recruit/obj_gift.png",
      //     w: 716,
      //     h: 705,
      // },
      // {
      //     ...defaultCircleImageInfo,
      //     path: "/images/recruit/obj_cake.png",
      //     w: 615,
      //     h: 605,
      // },
    ];
    if (isMobileForRecruit) {
      imageInfos = [
        {
          ...defaultMobileRectImageInfo,
          path: "src/assets/images/sweetPotato0.png",
          w: 284,
          h: 102,
        },
        {
          ...defaultMobileRectImageInfo,
          path: "src/assets/images/sweetPotato0.png",
          w: 310,
          h: 102,
        },
        {
          ...defaultMobileRectImageInfo,
          path: "src/assets/images/sweetPotato0.png",
          w: 259,
          h: 102,
        },
        {
          ...defaultMobileRectImageInfo,
          path: "src/assets/images/sweetPotato0.png",
          w: 291,
          h: 102,
        },
        {
          ...defaultMobileRectImageInfo,
          path: "src/assets/images/sweetPotato0.png",
          w: 280,
          h: 102,
        },
        {
          ...defaultMobileCircleImageInfo,
          path: "src/assets/images/sweetPotato0.png",
          w: 200,
          h: 200,
        },
        // {
        //     ...defaultMobileCircleImageInfo,
        //     path: "/images/recruit/m_obj_duck.png",
        //     w: 100,
        //     h: 100,
        // },
        // {
        //     ...defaultMobileCircleImageInfo,
        //     path: "/images/recruit/m_obj_gift.png",
        //     w: 102,
        //     h: 100,
        // },
        // {
        //     ...defaultMobileCircleImageInfo,
        //     path: "/images/recruit/m_obj_cake.png",
        //     w: 102,
        //     h: 100,
        // },
      ];
    }

    // Set the Left, Right, Bottom borders
    Composite.add(engine.world, [
      // Bot
      Bodies.rectangle(Math.ceil(w / 2), h + 20, w * 2, 20, {
        isStatic: true,
      }),
      // Left
      Bodies.rectangle(-20, Math.ceil(h / 2), 20, h * 2, {
        isStatic: true,
      }),
      // Right
      Bodies.rectangle(w + 20, Math.ceil(h / 2), 20, h * 2, {
        isStatic: true,
      }),
    ]);

    let objs = [];
    let rectOverlapRate = 0.02;
    let circleOverlapRate = 0.1;
    let frictionAir = 0.01;
    let yDiff = 500;
    if (isMobileForRecruit) {
      rectOverlapRate = 0.1;
      circleOverlapRate = 0.4;
      frictionAir = 0.021;
      yDiff = 240;
    }
    const isBigDesktopForRecruit = window.innerWidth > 1920;
    if (isBigDesktopForRecruit) {
      imageInfos = [...imageInfos, ...imageInfos];
    }
    const numObj = imageInfos.length;

    // Sort imageInfos randomly
    imageInfos.sort(() => Math.random() - 0.5);

    for (let i = 0; i < numObj; i++) {
      const centerX = Math.ceil(w / 4 * 3);
      const startPointX = getRandomInt(centerX, centerX + 50);
      const adjustedCenterY = Math.ceil(h - i * yDiff);
      const startPointY = getRandomInt(
        adjustedCenterY,
        adjustedCenterY + 50
      );
      const imageInfo = imageInfos[i];

      let bodyObj;
      if (imageInfo["type"] === "circle") {
        // Prototype of circle : Bodies.circle(x, y, radius, options={...somteOptions});
        const fixedScale = (imageInfo["xScale"] - circleOverlapRate) > 0 ? (imageInfo["xScale"] - circleOverlapRate) : 0.04;
        const radius = (imageInfo["w"] < imageInfo["h"] ? imageInfo["w"] : imageInfo["h"]) / 2;
        bodyObj = Bodies.circle(
          startPointX,
          startPointY,
          radius * fixedScale,
          {
            friction: 1,
            frictionAir: frictionAir,
            render: {
              sprite: {
                texture: imageInfo["path"],
                xScale: imageInfo["xScale"],
                yScale: imageInfo["yScale"],
              },
            },
          }
        );
      } else {
        // Prototype of rectangle : Bodies.rectangle(x, y, w, h, options={...somteOptions});
        const fixedXScale = (imageInfo["xScale"] - rectOverlapRate) > 0 ? (imageInfo["xScale"] - rectOverlapRate) : 0.04;
        const fixedYScale = (imageInfo["yScale"] - rectOverlapRate) > 0 ? (imageInfo["yScale"] - rectOverlapRate) : 0.04;
        bodyObj = Bodies.rectangle(
          startPointX,
          startPointY,
          imageInfo["w"] * fixedXScale,
          imageInfo["h"] * fixedYScale,
          {
            friction: 1,
            frictionAir: frictionAir,
            chamfer: { radius: imageInfo["charmferRadius"] },
            angle: getRandomInt(0, 180),
            render: {
              sprite: {
                texture: imageInfo["path"],
                xScale: imageInfo["xScale"],
                yScale: imageInfo["yScale"],
              },
            },
          }
        );
      }

      objs.push(bodyObj);
    }

    // add all of the bodies to the world
    Composite.add(engine.world, objs);

    // run the renderer
    Render.run(render);

    // create runner
    let runner = Runner.create();

    // run the engine
    Runner.run(runner, engine);
  </script>
</body>

</html>